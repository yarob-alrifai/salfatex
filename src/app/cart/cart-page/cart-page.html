<section class="cart">
  <header class="cart__header">
    <h1>سلة التسوق</h1>
  </header>

  <div class="cart__content" *ngIf="items().length; else empty">
    <table class="cart__table">
      <thead>
        <tr>
          <th>المنتج</th>
          <th>السعر</th>
          <th>الكمية</th>
          <th>الإجمالي</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of items(); trackBy: trackByProduct">
          <td>
            <div class="cart__product">
              <img [src]="item.product.images[0]" [alt]="item.product.name" />
              <div>
                <strong>{{ item.product.name }}</strong>

                <span class="cart__color">{{ item.product.color }}</span>
              </div>
            </div>
          </td>
          <td class="cart__price">
            <span>{{ item.product.price | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </td>
          <td class="cart__quantity">
            <input
              type="number"
              min="0"
              [value]="item.quantity"
              (change)="updateQuantity(item.product.id, $any($event.target).value)"
            />
          </td>
          <td class="cart__price">
            <span>{{ lineTotal(item) | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </td>
          <td class="cart__actions">
            <button type="button" (click)="remove(item.product.id)">✕</button>
          </td>
        </tr>
      </tbody>
    </table>

    <footer class="cart__footer">
      <div class="cart__summary">
        <span>
          <strong>الإجمالي</strong>
        </span>
        <span class="cart__total">{{ totalPrice() | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
      </div>
      <div class="cart__footer-actions">
        <button type="button" class="cart__clear" (click)="clear()">إفراغ السلة</button>
        <a class="cart__checkout" routerLink="/checkout">إتمام الطلب</a>
      </div>
    </footer>
  </div>
</section>

<ng-template #empty>
  <div class="cart__empty">
    <p>السلة فارغة حالياً.</p>

    <a routerLink="/categories">ابدأ التسوق</a>
  </div>
</ng-template>
