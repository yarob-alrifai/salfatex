<div class="cart-widget">
  <button type="button" class="cart-widget__toggle" (click)="toggle()">
    ๐
    <span class="cart-widget__badge" *ngIf="itemCount() > 0">{{ itemCount() }}</span>
  </button>

  <section class="cart-widget__panel" *ngIf="isOpen()">
    <header class="cart-widget__header">
      <div>
        <h2>ุณูุฉ ุงููุดุชุฑูุงุช</h2>
      </div>
      <button type="button" class="cart-widget__close" (click)="close()" aria-label="ุฅุบูุงู ุงูุณูุฉ">
        ร
      </button>
    </header>

    <p class="cart-widget__success" *ngIf="successMessage()">{{ successMessage() }}</p>
    <p class="cart-widget__error" *ngIf="errorMessage()">{{ errorMessage() }}</p>

    <ng-container *ngIf="hasItems(); else emptyCart">
      <ul class="cart-widget__list">
        <li class="cart-widget__item" *ngFor="let item of items()">
          <div>
            <h3>{{ item.product.name }}</h3>
            <span class="cart-widget__price">
              {{ item.product.price | currency : 'USD' : 'symbol' : '1.0-0' }}
            </span>
          </div>

          <div class="cart-widget__quantity">
            <button type="button" (click)="decrement(item.product.id)" aria-label="ุฅููุงุต ุงููููุฉ">
              โ
            </button>
            <span>{{ item.quantity }}</span>
            <button type="button" (click)="increment(item.product.id)" aria-label="ุฒูุงุฏุฉ ุงููููุฉ">
              +
            </button>
          </div>

          <span class="cart-widget__line-total">
            {{ item.product.price * item.quantity | currency : 'USD' : 'symbol' : '1.0-0' }}
          </span>
        </li>
      </ul>

      <div class="cart-widget__summary">
        <span>ุงูุฅุฌูุงูู </span>
        <strong>{{ total() | currency : 'USD' : 'symbol' : '1.0-0' }}</strong>
      </div>

      <form class="cart-widget__form" [formGroup]="checkoutForm" (ngSubmit)="submitOrder()">
        <div class="cart-widget__field">
          <label for="customerName">ุงุณู ุงูุนููู</label>
          <input
            id="customerName"
            type="text"
            formControlName="customerName"
            placeholder="ุงูุงุณู ุงููุงูู"
          />
          <small
            *ngIf="
              checkoutForm.controls.customerName.invalid &&
              checkoutForm.controls.customerName.touched
            "
          >
            ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุตุงูุญ.
          </small>
        </div>

        <div class="cart-widget__field">
          <label for="customerEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input
            id="customerEmail"
            type="email"
            formControlName="customerEmail"
            placeholder="example@email.com"
          />
          <small
            *ngIf="
              checkoutForm.controls.customerEmail.invalid &&
              checkoutForm.controls.customerEmail.touched
            "
          >
            ูุฑุฌู ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุงูุญ.
          </small>
        </div>

        <div class="cart-widget__field">
          <label for="shippingAddress">ุนููุงู ุงูุชูุตูู</label>
          <textarea
            id="shippingAddress"
            rows="2"
            formControlName="shippingAddress"
            placeholder="ุงููุฏููุฉุ ุงูุดุงุฑุนุ ูุนูููุงุช ุฅุถุงููุฉ"
          ></textarea>
        </div>

        <div class="cart-widget__field">
          <label for="notes">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
          <textarea id="notes" rows="2" formControlName="notes" placeholder="ููุงุญุธุงุชู"></textarea>
        </div>

        <button type="submit" [disabled]="submitting()" class="cart-widget__submit">
          <span *ngIf="!submitting()">ุชุฃููุฏ ุงูุทูุจ</span>
          <span *ngIf="submitting()">...ุฌุงุฑู ุงูุฅุฑุณุงู</span>
        </button>
      </form>
    </ng-container>

    <ng-template #emptyCart>
      <p class="cart-widget__empty">ุณูุชู ูุงุฑุบุฉ ุญุงููุงู .</p>
    </ng-template>
  </section>
</div>
